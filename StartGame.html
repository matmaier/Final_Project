<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <title>Final Project</title>
  

  <link rel="stylesheet" href="https://d10ajoocuyu32n.cloudfront.net/mobile/1.3.1/jquery.mobile-1.3.1.min.css">

  <link rel = "stylesheet"
              type = "text/css"
              href = "grid.css"/>

  <script src="jquery.js"></script>
  <script src="jquery.mobile.js"></script>
  
   
  
  <script type = "text/javascript">
     
      
      
    function init()
    {
        var status = new Array();
        var color = new Array();
        var winner=2;
        var player = 0;
        var i = 0;

        for (i = 0; i < 49; i++) {
            status[i] = 0;
        }
        for (i = 0; i < 49; i++) {
            color[i] = 2;
        }


        localStorage.setItem("status", status);
        localStorage.setItem("player", player);
        localStorage.setItem("color", color);
        localStorage.setItem("winner",winner);
          
    }
      


 
  function insert0() {
      var i = 0;
      var j = 0;
      var array = new Array();
      var color2 = new Array();
       status = localStorage.getItem("status");
       player = localStorage.getItem("player");
       color = localStorage.getItem("color");
       for (i = 0; i < 49; i++) {
           array[i] = status[j];
           color2[i] = color[j];
           j=j+2
       }
       i = 0;
      while((array[i]==1)&&(i<7))
      {
          i++;
      }
      if(i>6)
      {
          alert("Column is full! Choose other column!");
          checkIfFull();
          
      }else if(player==1)
      {
          var changeColor = document.getElementById("a" + i);
          changeColor.style.backgroundColor = "#000000";
          array[i] = 1;
          color2[i] = 1;
          
          checkIfFull();
          playerChange();
          
      } else if (player == 0)
      {
          var changeColor = document.getElementById("a" + i);
          changeColor.style.backgroundColor = "#ff0000";
          array[i] = 1;
          color2[i] = 0;
         
          checkIfFull();
          playerChange();
            
      } else {
          alert("Error:player undefined!");
      }
      
      
      localStorage.setItem("status", array);
      localStorage.setItem("color",color2);
      checkIfWinner();
      
  }


  function insert1()
  {
      var i = 0;
      var j = 0;
      var array = new Array();
      var color2 = new Array();
      status = localStorage.getItem("status");
      player = localStorage.getItem("player");
      color = localStorage.getItem("color");
      for (i = 0; i < 49; i++) {
          array[i] = status[j];
          color2[i] = color[j];
          j = j + 2
      }
      i = 7;
      while ((array[i] == 1) && (i < 14)) {
          i++;
      }
      if (i > 13) {
          alert("Column is full! Choose other column!");
          checkIfFull();
      } else if (player == 1) {
          var changeColor = document.getElementById("a" + i);
          changeColor.style.backgroundColor = "#000000";
          array[i] = 1;
          color2[i] = 1;
          
          checkIfFull();
          playerChange();

      } else if (player == 0) {
          var changeColor = document.getElementById("a" + i);
          changeColor.style.backgroundColor = "#ff0000";
          array[i] = 1;
          color2[i] = 0;
          
          checkIfFull();
          playerChange();

      } else {
          alert("Error:player undefined!");
      }


      localStorage.setItem("status", array);
      localStorage.setItem("color", color2);
      checkIfWinner();
  }
  function insert2() {
      var i = 0;
      var j = 0;
      var array = new Array();
      var color2 = new Array();
      status = localStorage.getItem("status");
      player = localStorage.getItem("player");
      color = localStorage.getItem("color");
      for (i = 0; i < 49; i++) {
          array[i] = status[j];
          color2[i] = color[j];
          j = j + 2
      }
      i = 14;
      while ((array[i] == 1) && (i < 21)) {
          i++;
      }
      if (i > 20) {
          alert("Column is full! Choose other column!");
          checkIfFull();
      } else if (player == 1) {
          var changeColor = document.getElementById("a" + i);
          changeColor.style.backgroundColor = "#000000";
          array[i] = 1;
          color2[i] = 1;

          checkIfFull();
          playerChange();

      } else if (player == 0) {
          var changeColor = document.getElementById("a" + i);
          changeColor.style.backgroundColor = "#ff0000";
          array[i] = 1;
          color2[i] = 0;

          checkIfFull();
          playerChange();

      } else {
          alert("Error:player undefined!");
      }


      localStorage.setItem("status", array);
      localStorage.setItem("color", color2);
      checkIfWinner();
  }
  function insert3() {
      var i = 0;
      var j = 0;
      var array = new Array();
      var color2 = new Array();
      status = localStorage.getItem("status");
      player = localStorage.getItem("player");
      color = localStorage.getItem("color");
      for (i = 0; i < 49; i++) {
          array[i] = status[j];
          color2[i] = color[j];
          j = j + 2
      }
      i = 21;
      while ((array[i] == 1) && (i < 28)) {
          i++;
      }
      if (i > 27) {
          alert("Column is full! Choose other column!");
          checkIfFull();
      } else if (player == 1) {
          var changeColor = document.getElementById("a" + i);
          changeColor.style.backgroundColor = "#000000";
          array[i] = 1;
          color2[i] = 1;

          checkIfFull();
          playerChange();

      } else if (player == 0) {
          var changeColor = document.getElementById("a" + i);
          changeColor.style.backgroundColor = "#ff0000";
          array[i] = 1;
          color2[i] = 0;

          checkIfFull();
          playerChange();

      } else {
          alert("Error:player undefined!");
      }


      localStorage.setItem("status", array);
      localStorage.setItem("color", color2);
      checkIfWinner();
  }
  function insert4() {
      var i = 0;
      var j = 0;
      var array = new Array();
      var color2 = new Array();
      status = localStorage.getItem("status");
      player = localStorage.getItem("player");
      color = localStorage.getItem("color");
      for (i = 0; i < 49; i++) {
          array[i] = status[j];
          color2[i] = color[j];
          j = j + 2
      }
      i = 28;
      while ((array[i] == 1) && (i < 35)) {
          i++;
      }
      if (i > 34) {
          alert("Column is full! Choose other column!");
          checkIfFull();
      } else if (player == 1) {
          var changeColor = document.getElementById("a" + i);
          changeColor.style.backgroundColor = "#000000";
          array[i] = 1;
          color2[i] = 1;

          checkIfFull();
          playerChange();

      } else if (player == 0) {
          var changeColor = document.getElementById("a" + i);
          changeColor.style.backgroundColor = "#ff0000";
          array[i] = 1;
          color2[i] = 0;

          checkIfFull();
          playerChange();

      } else {
          alert("Error:player undefined!");
      }


      localStorage.setItem("status", array);
      localStorage.setItem("color", color2);
      checkIfWinner();
  }
  function insert5() {
      var i = 0;
      var j = 0;
      var array = new Array();
      var color2 = new Array();
      status = localStorage.getItem("status");
      player = localStorage.getItem("player");
      color = localStorage.getItem("color");
      for (i = 0; i < 49; i++) {
          array[i] = status[j];
          color2[i] = color[j];
          j = j + 2
      }
      i = 35;
      while ((array[i] == 1) && (i < 42)) {
          i++;
      }
      if (i > 41) {
          alert("Column is full! Choose other column!");
          checkIfFull();
      } else if (player == 1) {
          var changeColor = document.getElementById("a" + i);
          changeColor.style.backgroundColor = "#000000";
          array[i] = 1;
          color2[i] = 1;

          checkIfFull();
          playerChange();

      } else if (player == 0) {
          var changeColor = document.getElementById("a" + i);
          changeColor.style.backgroundColor = "#ff0000";
          array[i] = 1;
          color2[i] = 0;

          checkIfFull();
          playerChange();

      } else {
          alert("Error:player undefined!");
      }


      localStorage.setItem("status", array);
      localStorage.setItem("color", color2);
      checkIfWinner();
  }
  function insert6() {
      var i = 0;
      var j = 0;
      var array = new Array();
      var color2 = new Array();
      status = localStorage.getItem("status");
      player = localStorage.getItem("player");
      color = localStorage.getItem("color");
      for (i = 0; i < 49; i++) {
          array[i] = status[j];
          color2[i] = color[j];
          j = j + 2
      }
      i = 42;
      while ((array[i] == 1) && (i < 49)) {
          i++;
      }
      if (i > 48) {
          alert("Column is full! Choose other column!");
          checkIfFull();
      } else if (player == 1) {
          var changeColor = document.getElementById("a" + i);
          changeColor.style.backgroundColor = "#000000";
          array[i] = 1;
          color2[i] = 1;

          checkIfFull();
          playerChange();

      } else if (player == 0) {
          var changeColor = document.getElementById("a" + i);
          changeColor.style.backgroundColor = "#ff0000";
          array[i] = 1;
          color2[i] = 0;

          checkIfFull();
          playerChange();

      } else {
          alert("Error:player undefined!");
      }


      localStorage.setItem("status", array);
      localStorage.setItem("color", color2);
      checkIfWinner();
  }
  function playerChange()
  {
      player = localStorage.getItem("player");
      if(player==0)
      {
          player = 1;
      }else if(player==1)
      {
          player = 0;
      }else{
        alert("Error:change player!");
      }
      localStorage.setItem("player",player);
  }
  function checkIfFull()
  {
      var i = 0;
      var j = 0;
      var array = new Array();
      status = localStorage.getItem("status");
      
      for (i = 0; i < 49; i++) {
          array[i] = status[j];
          j = j + 2
      }
      i = 0;
      while ((array[i] == 1) && (i < 49))
      {
          i++;
      }
      if(i>47)
      {
          alert("Game Over! The field is full!");
          EndOfGame();
      }

  }
  function checkIfWinner()
  {
      var i = 0;
      var j = 0;
      var array = new Array();
      var elements = new Array();
      var color2 = new Array();
      
      status = localStorage.getItem("status");
      color = localStorage.getItem("color");
      winner = localStorage.getItem("winner");

      for (i = 0; i < 49; i++) {
          array[i] = status[j];
          color2[i]=color[j];
          j = j + 2
      }
      for (i = 0; i < 7; i++)
      {
          for (j = 0; j < 4; j++)
          {
              if ((color2[i * 7+j] == 1) && (color2[i*7+j+1] == 1) && (color2[i*7+j+2] == 1) && (color2[i*7+j+3] == 1))
              {
                  alert("Winner:Player black!!");
                  winner = 1;
                  localStorage.setItem("winner",winner);
                  endOfGame();
              } else if ((color2[i * 7 + j] == 0) && (color2[i * 7 + j + 1] == 0) && (color2[i * 7 + j + 2] == 0) && (color2[i * 7 + j + 3] == 0)) {
                  alert("Winner:Player red!!");
                  winner = 0;
                  localStorage.setItem("winner", winner);
                  endOfGame();
              } else {
                  //do nothing
              }

          }
      }
      for (i = 0; i < 7; i++)
      {
          for (j = 0; j < 4; j++)
          {
              if ((color2[i + j * 7] == 1) && (color2[i + j * 7 + 1*7] == 1) && (color2[i + j * 7 + 2*7] == 1) && (color2[i + j * 7 + 3*7] == 1)) {
                  alert("Winner:Player black!!");
                  winner = 1;
                  localStorage.setItem("winner", winner);
                  endOfGame();
              } else if ((color2[i + j * 7] == 0) && (color2[i + j * 7 + 1*7] == 0) && (color2[i + j * 7 + 2*7] == 0) && (color2[i + j * 7 + 3*7] == 0)) {
                  alert("Winner:Player red!!");
                  winner = 0;
                  localStorage.setItem("winner", winner);
                  endOfGame();
              } else {
                  //do nothing
              }

          }
      }
      for (i = 0; i < 5; i++) {
          for (j = 0; j < 4; j++) {
              if ((color2[i*7 + j] == 1) && (color2[i*7 + j + 1*8] == 1) && (color2[i*7 + j + 2*8] == 1) && (color2[i*7 + j + 3 * 8] == 1)) {
                  alert("Winner:Player black!!");
                  winner = 1;
                  localStorage.setItem("winner", winner);
                  endOfGame();
              } else if ((color2[i*7 + j] == 0) && (color2[i*7 + j + 1*8] == 0) && (color2[i*7 + j + 2*8] == 0) && (color2[i*7 + j + 3*8] == 0)) {
                  alert("Winner:Player red!!");
                  winner = 0;
                  localStorage.setItem("winner", winner);
                  endOfGame();
              } else {
                  //do nothing
              }

          }
      }
      for (i = 0; i < 5; i++)
      {
          for (j = 3; j < 7; j++)
          {
              if ((color2[i * 7 + j] == 1) && (color2[i * 7 + j + 1 * 6] == 1) && (color2[i * 7 + j + 2 * 6] == 1) && (color2[i * 7 + j + 3 * 6] == 1)) {
                  alert("Winner:Player black!!");
                  winner = 1;
                  localStorage.setItem("winner", winner);
                  endOfGame();
              } else if ((color2[i * 7 + j] == 0) && (color2[i * 7 + j + 1 * 6] == 0) && (color2[i * 7 + j + 2 * 6] == 0) && (color2[i * 7 + j + 3 * 6] == 0)) {
                  alert("Winner:Player red!!");
                  winner = 0;
                  localStorage.setItem("winner", winner);
                  endOfGame();
              } else {
                  //do nothing
              }

          }
      }
            
      
  }
  function endOfGame()
  {
      winner = localStorage.getItem("winner");
      statisticOwner = localStorage.getItem("statisticOwner");
      statisticOpponent = localStorage.getItem("statisticOpponent");
      statisticTie = localStorage.getItem("statisticTie");
      if(winner==0)
      {
          statisticOwner += 1;
      }else if(winner==1)
      {
          statisticOpponent += 1;
      } else if (winner == 2) {
          statisticTie += 1;
      } else {
          alert("Error:end of game!");
      }
      window.location = 'http://cs.iupui.edu/~matmaier/finalproject/';
  }
  function editor(){
      alert("Matthias Maier\nFall Semester 2013\nIUPUI\nmatmaier@iupui.edu");
  }
  </script>
</head>


<body onload="init()">
<div data-role="page" id="page2">
    <div data-theme="a" data-role="header">
        <a data-role="button" href="index.html" data-icon="arrow-l" data-iconpos="left"
        class="ui-btn-left">
            Back
        </a>
        <h1>
            Connect Four
        </h1>
        <a data-role="button" href="index.html"  
        class="ui-btn-right">
            Home
        </a>
    </div>

    <table>
        <tr>
            <th><div class="circle" id="a0"></div></th>
            <th><div class="circle" id="a1"></div></th>
            <th><div class="circle" id="a2"></div></th>
            <th><div class="circle" id="a3"></div></th>
            <th><div class="circle" id="a4"></div></th>
            <th><div class="circle" id="a5"></div></th>
            <th><div class="circle" id="a6"></div></th>
            <th>
                <a data-role="button" href="#page2" onclick="insert0()">
                    <
                </a>
            </th>
        </tr>
        <tr>
            <th><div class="circle" id="a7"></div></th>
            <th><div class="circle" id="a8"></div></th>
            <th><div class="circle" id="a9"></div></th>
            <th><div class="circle" id="a10"></div></th>
            <th><div class="circle" id="a11"></div></th>
            <th><div class="circle" id="a12"></div></th>
            <th><div class="circle" id="a13"></div></th>
            <th>
                <a data-role="button" href="#page2" onclick="insert1()">
                    <
                </a>
            </th>
        </tr>
        <tr>
            <th><div class="circle" id="a14"></div></th>
            <th><div class="circle" id="a15"></div></th>
            <th><div class="circle" id="a16"></div></th>
            <th><div class="circle" id="a17"></div></th>
            <th><div class="circle" id="a18"></div></th>
            <th><div class="circle" id="a19"></div></th>
            <th><div class="circle" id="a20"></div></th>
            <th>
                <a data-role="button" href="#page2" onclick="insert2()">
                    <
                </a>
            </th>
        </tr>
        <tr>
            <th><div class="circle" id="a21"></div></th>
            <th><div class="circle" id="a22"></div></th>
            <th><div class="circle" id="a23"></div></th>
            <th><div class="circle" id="a24"></div></th>
            <th><div class="circle" id="a25"></div></th>
            <th><div class="circle" id="a26"></div></th>
            <th><div class="circle" id="a27"></div></th>
            <th>
                <a data-role="button" href="#page2" onclick="insert3()">
                    <
                </a>
            </th>
        </tr>
        <tr>
            <th><div class="circle" id="a28"></div></th>
            <th><div class="circle" id="a29"></div></th>
            <th><div class="circle" id="a30"></div></th>
            <th><div class="circle" id="a31"></div></th>
            <th><div class="circle" id="a32"></div></th>
            <th><div class="circle" id="a33"></div></th>
            <th><div class="circle" id="a34"></div></th>
            <th>
                <a data-role="button" href="#page2" onclick="insert4()">
                    <
                </a>
            </th>
        </tr>
        <tr>
            <th><div class="circle" id="a35"></div></th>
            <th><div class="circle" id="a36"></div></th>
            <th><div class="circle" id="a37"></div></th>
            <th><div class="circle" id="a38"></div></th>
            <th><div class="circle" id="a39"></div></th>
            <th><div class="circle" id="a40"></div></th>
            <th><div class="circle" id="a41"></div></th>
            <th>
                <a data-role="button" href="#page2" onclick="insert5()">
                    <
                </a>
            </th>
        </tr>
        <tr>
            <th><div class="circle" id="a42"></div></th>
            <th><div class="circle" id="a43"></div></th>
            <th><div class="circle" id="a44"></div></th>
            <th><div class="circle" id="a45"></div></th>
            <th><div class="circle" id="a46"></div></th>
            <th><div class="circle" id="a47"></div></th>
            <th><div class="circle" id="a48"></div></th>
            <th>
                <a data-role="button" href="#page2" onclick="insert6()">
                    <
                </a>
            </th>
        </tr>
        
    </table>

    
  


    <div data-theme="d" data-role="footer" data-position="fixed">
        <a id="editor" data-role="button" data-theme="a" class="ui-btn-left" onclick="editor()">
            Editor
        </a>
        <h3>
        </h3>
    </div>
</div>
</body>
</html>
